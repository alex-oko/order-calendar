<div class="container-fluid">
  <div class="col-12 mt-3">
    <div class="row">
      <div class="col-2 pl-0">
        <h4 style="line-height: 38px;">Pedidos</h4>
      </div>
      <div class="col">
        <div class="row">
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-light btn-circle p-0" (click)="previousDate()">
              <i class="material-icons">keyboard_arrow_left</i>
            </button>
            <h4 class="ml-3" style="line-height: 38px;">{{objActualDate.date | uppercase }}</h4>
            <button type="button" class="btn btn-light btn-circle p-0 ml-3" (click)="nextDate()">
              <i class="material-icons">keyboard_arrow_right</i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-2">
      <p class="font-weight-light">Pedidos realizados en este mes</p>
      <div class="content-orders">
        <ul class="list-group list-group-flush">
          <li class="list-group-item p-2" *ngFor="let order of arrayOrders">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">{{order.name}}</h6>
              <span class="font-weight-bold">{{order.deliveryOrder > 1 ? order.deliveryOrder + ' dias': order.deliveryOrder + ' dia'}}</span>
            </div>
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1 font-weight-lighter">Articulos pedidos</h6>
              <span class="font-weight-bold">{{order.orders.length}}</span>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <!-- Calendario -->
    <div class="col">
      <table class="table table-borderless" style="border-collapse: initial;     height: 91vh;">
        <thead>
        <tr>
          <th class="num-sem"></th>
          <th *ngFor="let textDay of daysWeek" class="text-center">{{textDay}}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of calendar">
          <td class="num-sem text-center">{{data.week}}</td>
          <td *ngFor="let day  of data.days" [ngClass]="{'not-current-month': !day.isActualMonth}" class="text-center">
            <div [ngClass]="{'actual-day': day.actualDay}">{{day.day}}</div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<button type="button" class="btn btn-floating bg-redwine" data-toggle="modal" data-target="#modalCreateEvent"
        (click)="openModalCreateEvent()">
  <i class="material-icons">add</i>
</button>

<!-- Modal -->
<div class="modal fade" id="modalCreateEvent" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Agregar pedido</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form #addEventForm="ngForm">
        <div class="modal-body">
          <div class="row">
            <div class="col-4">
              <div class="row">
                <div class="col form-group">
                  <label for="startDate">Fecha</label>
                  <input type="text" class="form-control" id="startDate" name="startDate"
                         [(ngModel)]="objCreateEvent.startDate">
                </div>
                <div class="col form-group">
                  <label for="endDate">Fecha de entrega</label>
                  <input type="text" class="form-control" id="endDate" name="endDate"
                         [(ngModel)]="objCreateEvent.endDate">
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col form-group">
                  <label for="name">Nombre</label>
                  <input type="text" class="form-control" id="name" name="name" [(ngModel)]="objCreateEvent.name">
                </div>
                <div class="col form-group">
                  <label for="telephone">Telefono</label>
                  <input type="tel" class="form-control" id="telephone" name="telephone"
                         [(ngModel)]="objCreateEvent.telephone">
                </div>
                <div class="col form-group">
                  <label for="address">Direccion</label>
                  <input type="text" class="form-control" id="address" name="address"
                         [(ngModel)]="objCreateEvent.address">
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="form-group form-check">
                <input type="checkbox" class="form-check-input" id="present" name="isPresent"
                       [(ngModel)]="objCreateEvent.isPresent">
                <label class="form-check-label" for="present">Regalo?</label>
              </div>
            </div>
            <div class="col-12" *ngIf="objCreateEvent.isPresent">
              <div class="row">
                <div class="col form-group">
                  <label for="name">Recibe</label>
                  <input type="text" class="form-control" id="receives" name="name"
                         [(ngModel)]="objCreateEvent.receives">
                </div>
                <div class="col form-group">
                  <label for="recipientsPhone">Telefono</label>
                  <input type="tel" class="form-control" id="recipientsPhone" name="telephone"
                         [(ngModel)]="objCreateEvent.recipientsPhone">
                </div>
                <div class="col form-group">
                  <label for="deliveryAddress">Direccion de entrega</label>
                  <input type="text" class="form-control" id="deliveryAddress" name="address"
                         [(ngModel)]="objCreateEvent.deliveryAddress">
                </div>
              </div>
            </div>
            <div class="col-12 table-responsive-md">
              <table class="table table-borderless table-striped">
                <thead>
                <tr>
                  <th scope="col" style="width: 8rem">Ref.</th>
                  <th scope="col" style="width: 10rem">Modelo</th>
                  <th scope="col" style="width: 6rem;">Cant.</th>
                  <th scope="col">Descripcion</th>
                  <th scope="col" style="width: 8rem;">Valor Und.</th>
                  <th scope="col" style="width: 8rem;">Dcto</th>
                  <th scope="col">Total</th>
                  <th scope="col" style="width: 3rem;">-</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let order of objCreateEvent.orders; index as pos">
                  <td style="width: 8rem">
                    <input type="text" class="form-control" name="ref_{{order.idOrder}}" [(ngModel)]="order.ref">
                  </td>
                  <td style="width: 10rem">
                    <input type="text" class="form-control" name="model_{{order.idOrder}}" [(ngModel)]="order.model">
                  </td>
                  <td style="width: 6rem;">
                    <input type="number" class="form-control" name="quantity_{{order.idOrder}}"
                           [(ngModel)]="order.quantity">
                  </td>
                  <td>
                    <textarea class="form-control" style="height: 38px;" name="description_{{order.idOrder}}"
                              [(ngModel)]="order.description"></textarea>
                  </td>
                  <td style="width: 8rem;">
                    <input type="number" class="form-control" name="unitValue_{{order.idOrder}}"
                           [(ngModel)]="order.unitValue">
                  </td>
                  <td style="width: 8rem;">
                    <input type="number" class="form-control" name="discount_{{order.idOrder}}"
                           [(ngModel)]="order.discount">
                  </td>
                  <td>
                    {{ order.discount ? (order.quantity * order.unitValue) - order.discount : (order.quantity * order.unitValue)}}
                  </td>
                  <td style="width: 3rem;">
                    <button type="submit" class="btn btn-danger" *ngIf="objCreateEvent.orders.length > 1"
                            (click)="removeOrder(pos)">X
                    </button>
                    <button type="submit" class="btn btn-warning" *ngIf="objCreateEvent.orders.length === 1"
                            (click)="clearOrder()">L
                    </button>
                  </td>
                </tr>
                </tbody>
              </table>
              <button type="submit" class="btn btn-primary" (click)="addOrder()">agregar pedido</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary">Crear</button>
        </div>
      </form>
    </div>
  </div>
</div>
