<div class="container-fluid pt-2 pb-2" style="height: 100vh;">
  <div class="row">
    <!-- lista de pedidos -->
    <div class="col-2">
      <h4 style="line-height: 38px;">Pedidos</h4>
      <p class="font-weight-light">Pedidos realizados en este mes</p>
      <div class="content-orders">
        <ul class="list-group list-group-flush">
          <button class="list-group-item list-group-item-action p-2" *ngFor="let order of arrayOrders" (click)="openModalSeeOrder(order)">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">{{order.infoClient.name}}</h6>
              <span class="font-weight-bold">{{order.finalDateMoment > 1 ? order.finalDateMoment + ' dias': order.finalDateMoment + ' dia'}}</span>
            </div>
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1 font-weight-lighter">Articulos pedidos</h6>
              <span class="font-weight-bold">{{order.products.length}}</span>
            </div>
          </button>
        </ul>
      </div>
    </div>
    <!-- Calendario -->
    <div class="col">
      <div class="column">
        <div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn btn-light btn-circle p-0" (click)="previousDate()">
            <i class="material-icons">keyboard_arrow_left</i>
          </button>
          <h4 class="ml-3" style="line-height: 38px;">{{objActualDate.date | uppercase }}</h4>
          <button type="button" class="btn btn-light btn-circle p-0 ml-3" (click)="nextDate()">
            <i class="material-icons">keyboard_arrow_right</i>
          </button>
        </div>
        <!-- Tabla -->
        <table class="table table-borderless" style="border-collapse: initial;     height: 91vh;">
          <thead>
          <tr>
            <th class="num-sem"></th>
            <th *ngFor="let textDay of daysWeek" class="text-center">{{textDay}}</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let data of calendar">
            <td class="num-sem text-center">{{data.week}}</td>
            <td *ngFor="let day  of data.days" [ngClass]="{'holiday': day.isHoliday, 'not-current-month': !day.isActualMonth}" class="text-center">
              <div [ngClass]="{'actual-day': day.actualDay}">{{day.day}}</div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Boton para crear un pedido -->
<button type="button" class="btn btn-floating bg-redwine" data-toggle="modal" data-target="#modalCreateEvent"
        (click)="openModalCreateOrder()">
  <i class="material-icons">add</i>
</button>

<!-- Modal crear -->
<app-modal [objInfoModal]="modalCreateOrder">
  <form #addEventForm="ngForm">
    <div class="modal-body p-0">
      <div class="row pl-4 pr-4 pb-0 pt-0">
        <div class="col-4 p-0">
          <div class="row">
            <div class="col form-group">
              <label class="label-input" for="startDate">Fecha</label>
              <input type="text" class="form-control" id="startDate" name="startDate"
                     [(ngModel)]="objCreateEvent.initialDate">
            </div>
            <div class="col form-group">
              <label class="label-input" for="endDate">Fecha de entrega</label>
              <input type="text" class="form-control" id="endDate" name="endDate"
                     [(ngModel)]="objCreateEvent.finalDate">
            </div>
          </div>
        </div>
        <!-- Informacion cliente -->
        <div class="col-12 p-0 mt-3">
          <h5>Info cliente</h5>
          <div class="column pt-3">
            <!-- info cliente -->
            <div class="col-12 p-0">
              <div class="row">
                <div class="col form-group">
                  <label class="label-input" for="name">Nombre</label>
                  <input type="text" class="form-control" id="name" name="name" [(ngModel)]="objCreateEvent.infoClient.name">
                </div>
                <div class="col-2 form-group">
                  <label class="label-input" for="tel">Telefono</label>
                  <input type="tel" class="form-control" id="tel" name="tel"
                         [(ngModel)]="objCreateEvent.infoClient.phone">
                </div>
                <div class="col form-group">
                  <label class="label-input" for="dir">Direccion</label>
                  <input type="text" class="form-control" id="dir" name="dir"
                         [(ngModel)]="objCreateEvent.infoClient.address">
                </div>
                <div class="col-2 form-group">
                  <label class="label-input" for="city">Ciudad</label>
                  <input type="text" class="form-control" id="city" name="city"
                         [(ngModel)]="objCreateEvent.infoClient.deliveryCity">
                </div>
              </div>
            </div>
            <!-- Chekbox (es regalo?) -->
            <div class="col-12 p-0">
              <div class="form-group form-check">
                <input type="checkbox" class="form-check-input" id="present" name="isPresent"
                       [(ngModel)]="objCreateEvent.present">
                <label class="form-check-label" for="present">Regalo?</label>
              </div>
            </div>
            <!-- Info cliente regalo -->
            <div class="col-12 p-0">
              <div class="row" *ngIf="objCreateEvent.present">
                <div class="col form-group">
                  <label class="label-input" for="name2">Recibe</label>
                  <input type="text" class="form-control" id="name2" name="name2" [(ngModel)]="objCreateEvent.deliveryInfo.name">
                </div>
                <div class="col-2 form-group">
                  <label class="label-input" for="tel2">Telefono</label>
                  <input type="tel" class="form-control" id="tel2" name="tel2"
                         [(ngModel)]="objCreateEvent.deliveryInfo.phone">
                </div>
                <div class="col form-group">
                  <label class="label-input" for="dir2">Direccion de entrega</label>
                  <input type="text" class="form-control" id="dir2" name="dir2"
                         [(ngModel)]="objCreateEvent.deliveryInfo.address">
                </div>
                <div class="col-2 form-group">
                  <label class="label-input" for="city2">Ciudad</label>
                  <input type="text" class="form-control" id="city2" name="city2"
                         [(ngModel)]="objCreateEvent.deliveryInfo.deliveryCity">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Productos -->
        <h5 class="ml-0 mt-3">Productos</h5>
        <div class="col-12 p-0" *ngFor="let order of objCreateEvent.products; index as pos; even as isEven">
          <div class="column pt-3 pb-3 pr-0 pl-0 border-gray">
            <div class="col-12 p-0">
              <div class="row">
                <div class="col form-group">
                  <label class="label-input" for="model_{{order.idProduct}}">Modelo</label>
                  <input type="text" class="form-control" id="model_{{order.idProduct}}" name="model_{{order.idProduct}}" [(ngModel)]="order.model">
                </div>
                <div class="col form-group">
                  <label class="label-input" for="size_{{order.idProduct}}">Tamaño</label>
                  <input type="text" class="form-control" id="size_{{order.idProduct}}" name="size_{{order.idProduct}}" [(ngModel)]="order.size">
                </div>
                <div class="col-1 form-group">
                  <label class="label-input" for="cant_{{order.idProduct}}">Cant.</label>
                  <input type="number" class="form-control" id="cant_{{order.idProduct}}" name="cant_{{order.idProduct}}" [(ngModel)]="order.quantity">
                </div>
                <div class="col form-group">
                  <label class="label-input" for="customValue_{{order.idProduct}}">Valor cambios</label>
                  <input type="number" class="form-control" id="customValue_{{order.idProduct}}" name="customValue_{{order.idProduct}}" [(ngModel)]="order.customPrice">
                </div>
                <div class="col form-group">
                  <label class="label-input" for="unitValue_{{order.idProduct}}">Valor undidad</label>
                  <input type="number" class="form-control" id="unitValue_{{order.idProduct}}" name="unitValue_{{order.idProduct}}" [(ngModel)]="order.unitPrice">
                </div>
                <div class="col-1 form-group">
                  <label class="label-input" for="discount_{{order.idProduct}}">Dto.</label>
                  <input type="number" class="form-control" id="discount_{{order.idProduct}}" name="discount_{{order.idProduct}}" [(ngModel)]="order.discount">
                </div>
                <div class="col form-group pr-0">
                  <label>Total</label>
                  <p>-------</p>
                </div>
                <div class="col-1 pr-3 pt-0 pb-4 pl-0">
                  <button type="submit" class="btn btn-danger mt-2 float-right" *ngIf="objCreateEvent.products.length > 1"
                          (click)="removeOrder(pos)">X
                  </button>
                  <button type="submit" class="btn btn-warning mt-2 float-right" *ngIf="objCreateEvent.products.length === 1"
                          (click)="clearOrder()">L
                  </button>
                </div>
              </div>
            </div>
            <div class="col-5 p-0">
              <div class="form-group">
                <label class="label-input" for="description_{{order.idProduct}}">Description</label>
                <textarea class="form-control" id="description_{{order.idProduct}}" name="description_{{order.idProduct}}" [(ngModel)]="order.description"></textarea>
              </div>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary ml-0 mt-3" (click)="addOrder()">agregar pedido</button>
      </div>
    </div>
    <div class="modal-footer p-4" style="border:none;">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
      <button type="button" class="btn btn-primary">Crear</button>
    </div>
  </form>
</app-modal>

<!-- Modal ver -->
<app-modal [objInfoModal]="modalSeeOrder">
  <div class="p-2" *ngIf="selectedOrder">
    <div class="col-12 p-0">
      <div class="row">
        <div class="col">
          <p class="m-0" style="font-weight: 400;">Direccion de entrega:</p>
          <p class="m-0" style="font-weight: 600;">{{selectedOrder['infoClient']['address']}}</p>
        </div>
        <div class="col">
          <p class="m-0" style="font-weight: 400;">Telefono de contacto:</p>
          <p class="m-0" style="font-weight: 600;">{{selectedOrder['infoClient']['phone']}}</p>
        </div>
      </div>
    </div>
    <div class="col-12 p-0 mt-5 mb-5 border-gray" *ngFor="let product of selectedOrder.products">
      <div class="row mb-3">
         <div class="col-2">
           <img src="https://scontent.fclo1-2.fna.fbcdn.net/v/t1.0-9/107812245_4536229833057552_2341255372354391007_o.jpg?_nc_cat=105&_nc_sid=9267fe&_nc_ohc=UOXMko4r-DcAX8mVTqT&_nc_ht=scontent.fclo1-2.fna&oh=e3e136bb52796ebbf8e7c0116826b6cc&oe=5F774AF9" class="w-auto mw-100 h-auto max-vh-100 mx-auto position-relative">
         </div>
        <div class="col">
          <div class="col-6 p-0">
            <div class="row">
              <div class="col">
                <p class="m-0" style="font-weight: 400;">Modelo</p>
                <p class="m-0" style="font-weight: 600;">{{product.model}}</p>
              </div>
              <div class="col">
                <p class="m-0" style="font-weight: 400;">Tamaño</p>
                <p class="m-0" style="font-weight: 600;">{{product.size}}</p>
              </div>
              <div class="col">
                <p class="m-0" style="font-weight: 400;">Cantidad</p>
                <p class="m-0" style="font-weight: 600;">{{product.quantity}}</p>
              </div>
            </div>
          </div>
          <div class="col-12 mt-3 p-0">
            <p class="m-0" style="font-weight: 400;">Descripcion</p>
            <p class="m-0" style="font-weight: 600;">{{product.description}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-modal>


