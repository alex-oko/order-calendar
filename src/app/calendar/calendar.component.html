<div class="container-fluid">
  <div class="col-12 mt-3">
    <div class="row">
      <div class="col-2 pl-0">
        <h4 style="line-height: 38px;">Pedidos</h4>
      </div>
      <div class="col">
        <div class="row">
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-light btn-circle p-0" (click)="previousDate()">
              <i class="material-icons">keyboard_arrow_left</i>
            </button>
            <h4 class="ml-3" style="line-height: 38px;">{{objActualDate.date | uppercase }}</h4>
            <button type="button" class="btn btn-light btn-circle p-0 ml-3" (click)="nextDate()">
              <i class="material-icons">keyboard_arrow_right</i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-2">
      <p class="font-weight-light">Pedidos realizados en este mes</p>
      <div class="content-orders">
        <ul class="list-group list-group-flush">
          <button class="list-group-item list-group-item-action p-2" *ngFor="let order of arrayOrders" (click)="openModalSeeOrder()">
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1">{{order.name}}</h6>
              <span class="font-weight-bold">{{order.deliveryOrder > 1 ? order.deliveryOrder + ' dias': order.deliveryOrder + ' dia'}}</span>
            </div>
            <div class="d-flex w-100 justify-content-between">
              <h6 class="mb-1 font-weight-lighter">Articulos pedidos</h6>
              <span class="font-weight-bold">{{order.orders.length}}</span>
            </div>
          </button>
        </ul>
      </div>
    </div>
    <!-- Calendario -->
    <div class="col">
      <table class="table table-borderless" style="border-collapse: initial;     height: 91vh;">
        <thead>
        <tr>
          <th class="num-sem"></th>
          <th *ngFor="let textDay of daysWeek" class="text-center">{{textDay}}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of calendar">
          <td class="num-sem text-center">{{data.week}}</td>
          <td *ngFor="let day  of data.days" [ngClass]="{'not-current-month': !day.isActualMonth}" class="text-center">
            <div [ngClass]="{'actual-day': day.actualDay}">{{day.day}}</div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<button type="button" class="btn btn-floating bg-redwine" data-toggle="modal" data-target="#modalCreateEvent"
        (click)="openModalCreateOrder()">
  <i class="material-icons">add</i>
</button>

<!-- Modal crear -->
<div class="modal fade" id="modalCreateOrder" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Agregar pedido</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form #addEventForm="ngForm">
        <div class="modal-body">
          <div class="row">
            <div class="col-4">
              <div class="row">
                <div class="col form-group">
                  <label for="startDate">Fecha</label>
                  <input type="text" class="form-control" id="startDate" name="startDate"
                         [(ngModel)]="objCreateEvent.startDate">
                </div>
                <div class="col form-group">
                  <label for="endDate">Fecha de entrega</label>
                  <input type="text" class="form-control" id="endDate" name="endDate"
                         [(ngModel)]="objCreateEvent.endDate">
                </div>
              </div>
            </div>
            <!-- Informacion cliente -->
            <div class="col-12 mt-4">
              <h5>Info cliente</h5>
              <div class="row">
                <div class="col form-group">
                  <label for="name">Nombre</label>
                  <input type="text" class="form-control" id="name" name="name" [(ngModel)]="objCreateEvent.name">
                </div>
                <div class="col-2 form-group">
                  <label for="tel">Telefono</label>
                  <input type="tel" class="form-control" id="tel" name="tel"
                         [(ngModel)]="objCreateEvent.tel">
                </div>
                <div class="col form-group">
                  <label for="dir">Direccion</label>
                  <input type="text" class="form-control" id="dir" name="dir"
                         [(ngModel)]="objCreateEvent.dir">
                </div>
                <div class="col-2 form-group">
                  <label for="city">Ciudad</label>
                  <input type="text" class="form-control" id="city" name="city"
                         [(ngModel)]="objCreateEvent.city">
                </div>
              </div>
              <div class="col-12 p-0">
                <div class="form-group form-check">
                  <input type="checkbox" class="form-check-input" id="present" name="isPresent"
                         [(ngModel)]="objCreateEvent.isPresent">
                  <label class="form-check-label" for="present">Regalo?</label>
                </div>
              </div>
              <div class="row" *ngIf="objCreateEvent.isPresent">
                <div class="col form-group">
                  <label for="name2">Recibe</label>
                  <input type="text" class="form-control" id="name2" name="name2" [(ngModel)]="objCreateEvent.name2">
                </div>
                <div class="col-2 form-group">
                  <label for="tel2">Telefono</label>
                  <input type="tel" class="form-control" id="tel2" name="tel2"
                         [(ngModel)]="objCreateEvent.tel2">
                </div>
                <div class="col form-group">
                  <label for="dir2">Direccion de entrega</label>
                  <input type="text" class="form-control" id="dir2" name="dir2"
                         [(ngModel)]="objCreateEvent.dir">
                </div>
                <div class="col-2 form-group">
                  <label for="city2">Ciudad</label>
                  <input type="text" class="form-control" id="city2" name="city2"
                         [(ngModel)]="objCreateEvent.city2">
                </div>
              </div>
            </div>

            <!-- Productos -->
            <h5 class="ml-3 mt-4">Productos</h5>
            <div class="col-12" *ngFor="let order of objCreateEvent.orders; index as pos">
              <div class="row">
                <div class="col form-group">
                  <label for="model_{{order.idOrder}}">Modelo</label>
                  <input type="text" class="form-control" id="model_{{order.idOrder}}" name="model_{{order.idOrder}}" [(ngModel)]="order.model">
                </div>
                <div class="col form-group">
                  <label for="size_{{order.idOrder}}">Tama√±o</label>
                  <input type="text" class="form-control" id="size_{{order.idOrder}}" name="size_{{order.idOrder}}" [(ngModel)]="order.size">
                </div>
                <div class="col-1 form-group">
                  <label for="cant_{{order.idOrder}}">Cant.</label>
                  <input type="number" class="form-control" id="cant_{{order.idOrder}}" name="cant_{{order.idOrder}}" [(ngModel)]="order.cant">
                </div>
                <div class="col-3 form-group">
                  <label for="description_{{order.idOrder}}">Description</label>
                  <textarea class="form-control" id="description_{{order.idOrder}}" name="description_{{order.idOrder}}" [(ngModel)]="order.description"></textarea>
                </div>
                <div class="col form-group">
                  <label for="customValue_{{order.idOrder}}">Cambios $</label>
                  <input type="number" class="form-control" id="customValue_{{order.idOrder}}" name="customValue_{{order.idOrder}}" [(ngModel)]="order.customValue">
                </div>
                <div class="col form-group">
                  <label for="unitValue_{{order.idOrder}}">Valor Und.</label>
                  <input type="number" class="form-control" id="unitValue_{{order.idOrder}}" name="unitValue_{{order.idOrder}}" [(ngModel)]="order.unitValue">
                </div>
                <div class="col-1 form-group">
                  <label for="discount_{{order.idOrder}}">Dto.</label>
                  <input type="number" class="form-control" id="discount_{{order.idOrder}}" name="discount_{{order.idOrder}}" [(ngModel)]="order.discount">
                </div>
                <div class="col form-group pr-0">
                  <label for="total_{{order.idOrder}}">Total</label>
                  <input type="number" class="form-control" id="total_{{order.idOrder}}" name="total_{{order.idOrder}}" [(ngModel)]="order.total">
                </div>
                <div class="col-1 pr-3 pt-4 pb-4 pl-0">
                  <button type="submit" class="btn btn-danger mt-2 float-right" *ngIf="objCreateEvent.orders.length > 1"
                          (click)="removeOrder(pos)">X
                  </button>
                  <button type="submit" class="btn btn-warning mt-2 float-right" *ngIf="objCreateEvent.orders.length === 1"
                          (click)="clearOrder()">L
                  </button>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary ml-3" (click)="addOrder()">agregar pedido</button>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary">Crear</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal ver -->
<div class="modal fade" id="modalSeeOrder" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">pedido XXXX</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    </div>
  </div>
</div>


